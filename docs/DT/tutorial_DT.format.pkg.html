<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>文字列の入出力方法</title>
    <link rel="stylesheet" type="text/css" href="../media/style.css">
    <!--[if lt IE 9]>
    <script src="../media/html5.js"></script>  
    <![endif]-->
</head>
<body>
<header>
    <h1>DT</h1>
    <nav>
        <h1>グローバルナビゲーション</h1>
        <ul>
            <li><a href="../classtrees_DT.html">class tree: DT</a></li>
            <li><a href="../elementindex_DT.html">index: DT</a></li>
            <li><a href="../elementindex.html">all elements</a></li>
            <li><a href="../">API home</a></li>
        </ul>
    </nav>
</header>

<nav id="menu">
    <h1>メニュー</h1>
    <p id="todolist"><a href="../todolist.html">Todo List</a></p>
    <section>
        <h1>パッケージ</h1>
        <ul>
            <li><a href="../li_DT.html">DT</a></li>
            <li><a href="../li_Util.html">Util</a></li>
        </ul>
    </section>
    <section>
        <h1>チュートリアル/マニュアル</h1>
        <h2 class="level">Package-level</h2>
        <ul>
            <li class="tutorial_tree"><a href="../DT/tutorial_DT.pkg.html">時間操作モジュール DT</a>
                <ul>
                    <li class="tutorial_tree"><a href="../DT/tutorial_DT.basic.pkg.html">基本的な使用方法</a></li>
                </ul>
                <ul>
                    <li class="tutorial_tree"><a href="../DT/tutorial_DT.init.pkg.html">オブジェクトの生成方法</a></li>
                </ul>
                <ul>
                    <li class="tutorial_tree"><a href="../DT/tutorial_DT.format.pkg.html">文字列の入出力方法</a></li>
                </ul>
            </li>
        </ul>

    </section>
    <section>
        <h1>インタフェース</h1>
        <ul>
            <li><a href="../DT/DT_Format.html">DT_Format</a></li>
            <li><a href="../DT/DT_Time.html">DT_Time</a></li>
        </ul>
    </section>
    <section>
        <h1>クラス</h1>
        <ul>
            <li><a href="../DT/DT_AbstractTime.html">DT_AbstractTime</a></li>
            <li><a href="../DT/DT_Date.html">DT_Date</a></li>
            <li><a href="../DT/DT_Datetime.html">DT_Datetime</a></li>
            <li><a href="../DT/DT_FormatWrapper.html">DT_FormatWrapper</a></li>
            <li><a href="../DT/DT_HttpDateFormat.html">DT_HttpDateFormat</a></li>
            <li><a href="../DT/DT_ShiftFormat.html">DT_ShiftFormat</a></li>
            <li><a href="../DT/DT_SimpleFormat.html">DT_SimpleFormat</a></li>
            <li><a href="../DT/DT_TimeEquator.html">DT_TimeEquator</a></li>
            <li><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></li>
            <li><a href="../DT/DT_TimeWrapper.html">DT_TimeWrapper</a></li>
            <li><a href="../DT/DT_UnixTimeFormat.html">DT_UnixTimeFormat</a></li>
            <li><a href="../DT/DT_Util.html">DT_Util</a></li>
            <li><a href="../DT/DT_W3cDatetimeFormat.html">DT_W3cDatetimeFormat</a></li>
        </ul>
    </section>
    <section>
        <h1>ファイル</h1>
        <ul>
            <li><a href="../DT/_DT---AbstractTime.php.html">AbstractTime.php</a></li>
            <li><a href="../DT/_DT---Date.php.html">Date.php</a></li>
            <li><a href="../DT/_DT---Datetime.php.html">Datetime.php</a></li>
            <li><a href="../DT/_DT---Format.php.html">Format.php</a></li>
            <li><a href="../DT/_DT---FormatWrapper.php.html">FormatWrapper.php</a></li>
            <li><a href="../DT/_DT---HttpDateFormat.php.html">HttpDateFormat.php</a></li>
            <li><a href="../DT/_DT---load.php.html">load.php</a></li>
            <li><a href="../DT/_DT---ShiftFormat.php.html">ShiftFormat.php</a></li>
            <li><a href="../DT/_DT---SimpleFormat.php.html">SimpleFormat.php</a></li>
            <li><a href="../DT/_DT---Time.php.html">Time.php</a></li>
            <li><a href="../DT/_DT---TimeEquator.php.html">TimeEquator.php</a></li>
            <li><a href="../DT/_DT---Timestamp.php.html">Timestamp.php</a></li>
            <li><a href="../DT/_DT---TimeWrapper.php.html">TimeWrapper.php</a></li>
            <li><a href="../DT/_DT---UnixTimeFormat.php.html">UnixTimeFormat.php</a></li>
            <li><a href="../DT/_DT---Util.php.html">Util.php</a></li>
            <li><a href="../DT/_DT---W3cDatetimeFormat.php.html">W3cDatetimeFormat.php</a></li>
        </ul>
    </section>
</nav>
<section id="main">
<h1 class="symbol">文字列の入出力方法</h1>
    <div class="ref-synopsis">Author : <span class="author">trashtoy</span></div>
    <section id="toc">
    <h1>Table of Contents</h1>
    <ul>
        <li><a href="../DT/tutorial_DT.format.pkg.html#DT.format.basic">文字列の入出力方法　</a></li>
        <li><a href="../DT/tutorial_DT.format.pkg.html#DT.format.custom_class">フォーマットオブジェクトを指定した入出力</a></li>
        <li><a href="../DT/tutorial_DT.format.pkg.html#DT.format.simpleformat">ユーザー定義のパターンで入出力したい場合</a></li>
        <li><a href="../DT/tutorial_DT.format.pkg.html#DT.format.locale">入出力時のタイムゾーンの自動変換</a></li>
    </ul>
</section>

    <!-- refsect1 --><section class="tutorial" id="DT.format.basic"><h1>文字列の入出力方法　</h1><p>parse および format メソッドを使うことで, 
            文字列と時間オブジェクトを相互変換することが出来ます.
            以下に簡単な例を示します.</p>
        <ol class="src"><li><div class="src-line"><span class="src-var">$d1&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_Date.html">DT_Date</a></span><span class="src-sym">::</span><a href="../DT/DT_Date.html#methodparse">parse</a><span class="src-sym">(</span><span class="src-str">&quot;2012-05-21&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d2&nbsp;</span>=&nbsp;<span class="src-var">$d1</span><span class="src-sym">-&gt;</span><span class="src-id">add</span><span class="src-sym">(</span><span class="src-str">&quot;date&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-num">10</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d2</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;&quot;2012-06-01&quot;</span></div></li>
</ol>
        <p>時間オブジェクトの __toString メソッドは内部で format() を呼び出します.
            以下のコードはすべて同じ文字列 (&quot;2012-05-21&quot;) を出力します.</p>
        <ol class="src"><li><div class="src-line"><span class="src-var">$d1&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_Date.html">DT_Date</a></span><span class="src-sym">(</span><span class="src-num">2012</span><span class="src-sym">,&nbsp;</span><span class="src-num">5</span><span class="src-sym">,&nbsp;</span><span class="src-num">21</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d1</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d1</span><span class="src-sym">-&gt;</span><span class="src-id">__toString</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d1</span><span class="src-sym">;</span></div></li>
</ol></section><!-- /refsect1 -->
    <!-- refsect1 --><section class="tutorial" id="DT.format.custom_class"><h1>フォーマットオブジェクトを指定した入出力</h1><p>format() の引数に任意の <a href="../DT/DT_Format.html">DT_Format</a> オブジェクトを指定することで,
            任意の形式で文字列を出力することが出来ます.</p>
        <ol class="src"><li><div class="src-line"><span class="src-comm">//&nbsp;タイムゾーンが仮に&nbsp;Asia/Tokyo&nbsp;(UTC+9)&nbsp;に設定されているものとする</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$f1&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_W3cDatetimeFormat.html">DT_W3cDatetimeFormat</a></span><span class="src-sym">::</span><a href="../DT/DT_W3cDatetimeFormat.html#methodgetInstance">getInstance</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$f2&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_HttpDateFormat.html">DT_HttpDateFormat</a></span><span class="src-sym">::</span><a href="../DT/DT_HttpDateFormat.html#methodgetInstance">getInstance</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$f3&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_UnixTimeFormat.html">DT_UnixTimeFormat</a></span><span class="src-sym">::</span><a href="../DT/DT_UnixTimeFormat.html#methodgetInstance">getInstance</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$d&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></span><span class="src-sym">(</span><span class="src-num">2012</span><span class="src-sym">,&nbsp;</span><span class="src-num">5</span><span class="src-sym">,&nbsp;</span><span class="src-num">21</span><span class="src-sym">,&nbsp;</span><span class="src-num">7</span><span class="src-sym">,&nbsp;</span><span class="src-num">30</span><span class="src-sym">,&nbsp;</span><span class="src-num">45</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a href="http://www.php.net/var_dump">var_dump</a><span class="src-sym">(</span><span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$f1</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;string(19)&nbsp;&quot;2012-05-21T07:30:45&quot;</span></div></li>
<li><div class="src-line"><a href="http://www.php.net/var_dump">var_dump</a><span class="src-sym">(</span><span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$f2</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;string(29)&nbsp;&quot;Sun,&nbsp;20&nbsp;May&nbsp;2012&nbsp;22:30:45&nbsp;GMT&quot;</span></div></li>
<li><div class="src-line"><a href="http://www.php.net/var_dump">var_dump</a><span class="src-sym">(</span><span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$f3</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;string(10)&nbsp;&quot;1337553045&quot;</span></div></li>
</ol>
        <p>parse() の第 2 引数に DT_Format オブジェクトを指定することで,
            特定の形式の文字列を解析することができます.
            以下のコードの $d1, $d2, $d3 は全て等価なオブジェクト
            (2012-05-21T07:30:45) になります.</p>
        <ol class="src"><li><div class="src-line"><span class="src-comm">//&nbsp;タイムゾーンが仮に&nbsp;Asia/Tokyo&nbsp;(UTC+9)&nbsp;に設定されているものとする</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$f1&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_W3cDatetimeFormat.html">DT_W3cDatetimeFormat</a></span><span class="src-sym">::</span><a href="../DT/DT_W3cDatetimeFormat.html#methodgetInstance">getInstance</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$f2&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_HttpDateFormat.html">DT_HttpDateFormat</a></span><span class="src-sym">::</span><a href="../DT/DT_HttpDateFormat.html#methodgetInstance">getInstance</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$f3&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_UnixTimeFormat.html">DT_UnixTimeFormat</a></span><span class="src-sym">::</span><a href="../DT/DT_UnixTimeFormat.html#methodgetInstance">getInstance</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$d1&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></span><span class="src-sym">::</span><a href="../DT/DT_Timestamp.html#methodparse">parse</a><span class="src-sym">(</span><span class="src-str">&quot;2012-05-21T07:30:45&quot;</span><span class="src-sym">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="src-var">$f1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d2&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></span><span class="src-sym">::</span><a href="../DT/DT_Timestamp.html#methodparse">parse</a><span class="src-sym">(</span><span class="src-str">&quot;Sun,&nbsp;20&nbsp;May&nbsp;2012&nbsp;22:30:45&nbsp;GMT&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-var">$f2</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d3&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></span><span class="src-sym">::</span><a href="../DT/DT_Timestamp.html#methodparse">parse</a><span class="src-sym">(</span><span class="src-num">1337553045</span><span class="src-sym">,&nbsp;</span><span class="src-var">$f3</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol></section><!-- /refsect1 -->
    <!-- refsect1 --><section class="tutorial" id="DT.format.simpleformat"><h1>ユーザー定義のパターンで入出力したい場合</h1><p>クラス <a href="../DT/DT_SimpleFormat.html">DT_SimpleFormat</a> を使うことで,
            ユーザー定義の日付・時刻パターンで文字列解析と書式化が出来ます.
            Java で例えると
            <a href="http://docs.oracle.com/javase/jp/6/api/java/text/SimpleDateFormat.html">SimpleDateFormat</a>
            と同じような役割のクラスです.</p>
        <ol class="src"><li><div class="src-line"><span class="src-var">$f&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_SimpleFormat.html">DT_SimpleFormat</a></span><span class="src-sym">(</span><span class="src-str">&quot;Y/m/d&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d&nbsp;</span>=&nbsp;<span class="src-id"><a href="../DT/DT_Date.html">DT_Date</a></span><span class="src-sym">::</span><a href="../DT/DT_Date.html#methodparse">parse</a><span class="src-sym">(</span><span class="src-str">&quot;2012/05/21&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-var">$f</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">add</span><span class="src-sym">(</span><span class="src-str">&quot;date&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-num">20</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$f</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;&quot;2012/06/10&quot;</span></div></li>
</ol></section><!-- /refsect1 -->
    <!-- refsect1 --><section class="tutorial" id="DT.format.locale"><h1>入出力時のタイムゾーンの自動変換</h1><p>例えばニューヨークに設置してあるサーバーで日本向けの
            Web サイトを運営しているとしましょう.
            サーバーのタイムゾーン設定は UTC-5 (-300 分),
            Web サイトの時刻は UTC+9 (+540 分) で表示したいという要件も,
            <a href="../DT/DT_ShiftFormat.html">DT_ShiftFormat</a> を使えば簡単に実現できます.</p>
        <ol class="src"><li><div class="src-line"><span class="src-var">$f&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_ShiftFormat.html">DT_ShiftFormat</a></span><span class="src-sym">(</span><span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_SimpleFormat.html">DT_SimpleFormat</a></span><span class="src-sym">(</span><span class="src-str">&quot;Y/m/d&nbsp;H:i:s&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">540</span><span class="src-sym">,&nbsp;</span><span class="src-num">300</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></span><span class="src-sym">(</span><span class="src-num">2012</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;サーバー内部の時刻</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$f</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="src-comm">//&nbsp;&quot;2012/01/01&nbsp;14:00:00&quot;&nbsp;(UTC-5&nbsp;から&nbsp;UTC+9&nbsp;に変換)</span></div></li>
</ol>
        <p><a href="../DT/DT_W3cDatetimeFormat.html">DT_W3cDatetimeFormat</a> や <a href="../DT/DT_HttpDateFormat.html">DT_HttpDateFormat</a> など,
            タイムゾーンの自動変換機能を単体でサポートしているフォーマットもあります.
            以下に例を挙げます.</p>
        <ol class="src"><li><div class="src-line"><span class="src-var">$f&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_W3cDatetimeFormat.html">DT_W3cDatetimeFormat</a></span><span class="src-sym">(</span>-<span class="src-num">540</span><span class="src-sym">,&nbsp;</span><span class="src-num">300</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$d&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../DT/DT_Timestamp.html">DT_Timestamp</a></span><span class="src-sym">(</span><span class="src-num">2012</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">echo&nbsp;<span class="src-var">$d</span><span class="src-sym">-&gt;</span><span class="src-id">format</span><span class="src-sym">(</span><span class="src-var">$f</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;&quot;2012-01-01T14:00+09:00&quot;</span></div></li>
</ol>
        <p>引数に時差を指定する場合, UTC の西側のタイムゾーンが正,東側が負となります.
            (Javascript の Date.getTimeZoneOffset() と同じです)</p></section><!-- /refsect1 -->
<ul class="direction">
    <li class="prev"><a href="../DT/tutorial_DT.init.pkg.html">Prev</a></li>
    <li class="next"><a href="../Util/tutorial_Util.pkg.html">Next</a></li>
</ul>
<ul class="direction">
    <li class="prev">オブジェクトの生成方法</li>
    <li class="next">汎用モジュール群 Util</li>
</ul>
</section>
<footer>
    Documentation generated on Sat, 15 Dec 2012 00:35:28 +0900 by <a href="http://www.phpdoc.org">phpDocumentor 1.4.3</a>
</footer>
</body>
</html>